<!DOCTYPE HTML PUBLIC "-//W3C/DTD HTML 4.0 Transitional//EN">
<html>
<head style="height: 0;">
	<meta charset="utf-8" />

	<META HTTP-EQUIV = "Pragma" CONTENT="no-cache">
	<title> Minecraft Dynamic Map - Login/Register </title>
	<link rel="icon" href="images/dynmap.ico" type="image/ico" />

	<link rel="stylesheet" type="text/css" href="css/leaflet.css?_=3.5-beta-1-844" />
	<link rel="stylesheet" type="text/css" href="css/standalone.css?_=3.5-beta-1-844" media="screen" />
	<link rel="stylesheet" type="text/css" href="css/dynmap_style.css?_=3.5-beta-1-844" media="screen" />
	<script type="text/javascript" src="standalone/config.js?_=3.5-beta-1-844"></script>
	<script type="text/javascript" src="js/jquery-3.5.1.js?_=3.5-beta-1-844"></script>
	
	<script type="text/javascript">
		$(document).ready(function() {
			var status = $('#status_message');
			if(window.location.href.indexOf('error=loginfailed') >= 0)
				$('<div/>').text('Login Failed ').appendTo(status);
			if(window.location.href.indexOf('error=verifyfailed') >= 0)
				$('<div/>').text('Password Verify Error ').appendTo(status);
			if(window.location.href.indexOf('error=registerfailed') >= 0)
				$('<div/>').text('Registration failed (bad passcode?) ').appendTo(status);
			$('form')[0].setAttribute('action', config.url.login);
			$('form')[1].setAttribute('action', config.url.register);
			document.forms['login'].elements['j_username'].focus();
		});
		
		$(function(){
            $('form[name=register]').submit(function(){
                $.post($(this).attr('action'), $(this).serialize(), function(json) {
                    if(json.result == 'success')
                    	window.location = 'index.html';
                    else
                    	window.location = 'login.html?error=' + json.result;
                }, 'json');
                return false;
            });
        });

		$(function(){
            $('form[name=login]').submit(function(){
                $.post($(this).attr('action'), $(this).serialize(), function(json) {
                    if(json.result == 'success')
                    	window.location = 'index.html';
                    else
                    	window.location = 'login.html?error=' + json.result;
                }, 'json');
                return false;
            });
        });
	</script>
	
</head>
<body class="background">
<div class='dynmaplogin'>
<h2>CrashBlockEarth2.0网页地图登录&注册
</h2>
<div id="status_message" class="statusmessage"></div>
<table class='loginregister'>
<tr><th>已有账户了？登录:</th></tr>
<tr><td class='login'>
<FORM METHOD=POST name=login ACTION="up/login">
<p>
输入你的游戏名和密码:
<BR>
<BR>
<table>
<tr><td>游戏名: </td><td><input type="text" size="20" name="j_username"></td></tr>
<tr><td>密码: </td><td><input type="password" size="20" name="j_password"></td></tr>
</table>
<BR>
<input type="submit" name="登录" value="Login">
</p>
</form>
<p>
</td></tr>
<tr><th>注册新的网页地图账户:</th></tr>
<tr>
<td class='register'>
<FORM METHOD=POST name=register ACTION="up/register">
<p>
在游戏内的聊天栏发送 '/dynmap webregister' 服务器会为你发送一个注册代码<BR>在下方填入你的游戏名、密码和注册代码:
<BR>
<BR>
<table>
<tr><td>游戏名: </td><td><input type="text" size="20" name="j_username"></td></tr>
<tr><td>密码: </td><td><input type="password" size="20" name="j_password"></td></tr>
<tr><td>重复密码: </td><td><input type="password" size="20" name="j_verify_password"></td></tr>
<tr><td>注册代码: </td><td><input type="text" size="20" name="j_passcode"></td></tr>
</table>
<BR>
<BR>
<input type="submit" name="注册" value="Register">
</p>
</form>
</td>
</tr>
</table>
</div>

</body>
<style>
	/* .background{
		background-color: #ff9191;
    	color: #ffffff;
    	font-weight: bold;
    	text-align: center;
    	font-size: 16px;
    	background: linear-gradient(-45deg,#a0fcff , #a6ffc1, #a0fcff);
    	display: block;
	} */
</style>
</html>
